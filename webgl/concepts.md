多基本缓冲区模型

# 缓冲区 buffer

- 颜色缓冲区 第二章
- 深度缓冲区 第七章
- 模板缓冲区 不涉及

## 清空缓冲区

gl.clear(buffer)

- buffer 可以用 | 来指定多个缓冲区
  - gl.COLOR_BUFFER_BIT
  - gl.DEPTH_BUFFER_BIT
  - gl.STENCIL_BUFFER_BIT

清空颜色缓冲区 (color buffer) 将会清空绘图区域

# 着色器 shader

- 顶点着色器 Vertex shader: 用来描述顶点特性 (如位置/大小等) 的程序
- 片元着色器 Fragment shader: 进行逐片元处理过程 (如光照) 的程序. 其作用是处理片元, 使其显示在屏幕上.
  - 片元就是显示在屏幕上的一个像素 (严格意义上说, 片元包括这个像素的位置, 颜色和其它信息)

在三维场景中, 仅仅用线条和颜色把图形画出来是远远不够的, 必须考虑, 比如, 光线照上去之后, 或者观察者的视角发生变化, 对场景会有些什么影响. 着色器可以高度灵活地完成这些工作, 提供各种渲染效果.

JS 会将字符串形式的着色器代码传给 WebGL 系统, 并建立着色器. 着色器运行在 WebGL 系统中, 而不是 JS 程序中.

顶点着色器会先执行, 将处理后的信息传递给片元着色器, 然后片元着色器再执行. 片元着色器接收到的是经过光栅化处理后的片元值.

所以 WebGL 程序包括运行在浏览器中的 JS 和运行在 WebGL 系统的着色器程序这两个部分.

## 齐次坐标

- 齐次坐标能够提高处理三维数据的效率
- 齐次坐标 (x, y, z, w) 等价于三维坐标 (x/w, y/w, z/w).
- 所以如果齐次坐标的第四个分量是 1, 可以将它当做三维坐标来使用.

## WebGL 坐标系统

X 轴是水平的, 正方向为右
Y 轴是垂直的, 正方向为上
Z 轴是垂直于屏幕的, 正方向为外
